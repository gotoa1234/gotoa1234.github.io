<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Busan 2025</title>
    
    <!-- iOS PWA Settings -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Busan 2025">
    <!-- App Icon -->
    <link rel="apple-touch-icon" href="https://img.icons8.com/color/180/south-korea.png">

    <!-- Core Libraries -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.2/axios.min.js"></script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f8fafc;
            overscroll-behavior-y: none;
            padding-top: env(safe-area-inset-top);
        }

        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .glass {
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.4);
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.6);
        }

        /* Ambient Background */
        .ambient-bg {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: -1; background: #f1f5f9; overflow: hidden;
        }
        .orb {
            position: absolute; border-radius: 50%; filter: blur(80px); opacity: 0.6;
            animation: float 20s infinite ease-in-out;
        }
        .orb-1 { width: 300px; height: 300px; background: #a5f3fc; top: -50px; left: -50px; }
        .orb-2 { width: 400px; height: 400px; background: #bae6fd; bottom: -100px; right: -100px; animation-delay: -5s; }
        .orb-3 { width: 200px; height: 200px; background: #e0f2fe; top: 40%; left: 30%; animation-delay: -10s; }

        @keyframes float {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(30px, -30px); }
        }

        /* Transitions */
        .slide-up-enter-active { transition: all 0.4s cubic-bezier(0.25, 1, 0.5, 1); }
        .slide-up-enter-from { opacity: 0; transform: translateY(20px); }
        
        .fade-enter-active, .fade-leave-active { transition: opacity 0.3s ease; }
        .fade-enter-from, .fade-leave-to { opacity: 0; }

        header { padding-top: env(safe-area-inset-top); }
    </style>
</head>
<body class="text-slate-800 antialiased selection:bg-cyan-200 selection:text-cyan-900">

    <div class="ambient-bg">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
    </div>

    <div id="app" class="relative min-h-screen pb-24">

        <!-- Header -->
        <header class="fixed top-0 inset-x-0 z-50 glass shadow-sm transition-all duration-300">
            <div class="max-w-md mx-auto px-5 py-3 flex justify-between items-center">
                <div>
                    <h1 class="text-xl font-black tracking-tight text-slate-900 flex items-center gap-2">
                        <i class="fa-solid fa-plane-departure text-cyan-600"></i>
                        Busan <span class="text-cyan-600">2025</span>
                    </h1>
                    <p class="text-[10px] font-medium text-slate-500 tracking-wider uppercase">Flagship Travel Assistant</p>
                </div>

                <div class="flex items-center gap-2">
                     <!-- Help Button -->
                     <button @click="showHelp = true" 
                        class="w-8 h-8 rounded-full bg-white/50 hover:bg-white border border-slate-200 flex items-center justify-center text-slate-500 shadow-sm transition-all active:scale-95">
                        <i class="fa-solid fa-question text-sm"></i>
                    </button>

                    <!-- Translate -->
                    <a href="https://translate.google.com/?sl=zh-TW&tl=ko" target="_blank" 
                       class="w-8 h-8 rounded-full bg-white/50 hover:bg-white border border-slate-200 flex items-center justify-center text-slate-600 shadow-sm transition-all active:scale-95">
                        <i class="fa-solid fa-language text-sm"></i>
                    </a>
                    
                    <!-- Weather -->
                    <div v-if="weather" class="flex items-center gap-1.5 bg-gradient-to-r from-cyan-500 to-blue-500 text-white px-2 py-1 rounded-lg shadow-md shadow-cyan-500/20">
                        <span class="text-base">{{ weatherIcon }}</span>
                        <span class="font-bold text-xs">{{ weather.temperature }}¬∞C</span>
                    </div>
                    <div v-else class="animate-pulse h-7 w-12 bg-slate-200 rounded-lg"></div>
                </div>
            </div>

            <!-- Tabs -->
            <div class="max-w-md mx-auto px-4 pb-3 pt-1">
                <div class="flex space-x-2 overflow-x-auto hide-scrollbar pb-1">
                    <button v-for="(day, index) in days" :key="index"
                        @click="currentDay = index"
                        class="flex-shrink-0 px-4 py-1.5 rounded-full text-xs font-bold transition-all duration-300 border backdrop-blur-sm"
                        :class="currentDay === index 
                            ? 'bg-slate-800 text-white border-slate-800 shadow-lg shadow-slate-500/25 scale-105' 
                            : 'bg-white/60 text-slate-500 border-slate-200 hover:bg-white'">
                        {{ day.name }}
                    </button>
                </div>
            </div>
        </header>

        <!-- Content -->
        <main class="max-w-md mx-auto px-5 pt-36 space-y-8">
            <transition-group name="slide-up" tag="div">
                <div v-for="(item, index) in currentDayData.items" :key="item.koreanName" class="relative pl-6 pb-8 last:pb-0">
                    
                    <!-- Timeline -->
                    <div v-if="index !== currentDayData.items.length - 1" 
                         class="absolute left-[11px] top-8 bottom-0 w-0.5 bg-gradient-to-b from-slate-300 via-slate-200 to-transparent rounded-full"></div>
                    
                    <div class="absolute left-0 top-1.5 w-[22px] h-[22px] rounded-full border-[3px] border-white shadow-md z-10 flex items-center justify-center"
                         :class="item.category === 'food' ? 'bg-orange-400' : 'bg-cyan-500'">
                         <div class="w-1.5 h-1.5 bg-white rounded-full"></div>
                    </div>

                    <!-- Card -->
                    <div class="glass-card rounded-2xl p-4 shadow-lg shadow-cyan-900/5 hover:shadow-cyan-900/10 transition-shadow">
                        <!-- Card Header -->
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <div class="flex items-center gap-2 mb-1">
                                    <span class="text-sm font-black text-slate-400 font-mono">{{ item.time }}</span>
                                    <span class="px-2 py-0.5 rounded-md text-[10px] font-bold uppercase tracking-wider"
                                          :class="item.category === 'food' ? 'bg-orange-50 text-orange-600' : 'bg-cyan-50 text-cyan-600'">
                                        <i :class="item.category === 'food' ? 'fa-solid fa-utensils mr-1' : 'fa-solid fa-location-dot mr-1'"></i>
                                        {{ item.category === 'food' ? 'Food' : 'Spot' }}
                                    </span>
                                </div>
                                <h3 class="text-lg font-extrabold text-slate-800 leading-tight">{{ item.name }}</h3>
                                <div class="text-xs text-slate-400 mt-0.5 font-medium">{{ item.koreanName }}</div>
                            </div>
                            
                            <!-- Share Button -->
                            <button @click="shareLocation(item)" 
                                class="w-8 h-8 rounded-full bg-white border border-slate-100 flex items-center justify-center text-slate-400 hover:text-green-500 hover:border-green-200 hover:bg-green-50 transition-all active:scale-95 shadow-sm">
                                <i class="fa-solid fa-share-nodes text-sm"></i>
                            </button>
                        </div>

                        <!-- Info -->
                        <div class="space-y-3 mb-4">
                            <div class="flex items-start gap-2.5 text-xs">
                                <div class="w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0"
                                     :class="item.category === 'food' ? 'bg-orange-100 text-orange-500' : 'bg-cyan-100 text-cyan-500'">
                                    <i class="fa-regular fa-clock"></i>
                                </div>
                                <span class="py-0.5 text-slate-600 font-medium">{{ item.hours }}</span>
                            </div>

                            <div @click="copyAddress(item.address)" 
                                 class="group cursor-pointer flex items-start gap-2.5 p-2 rounded-lg bg-slate-50 border border-slate-100 hover:bg-blue-50 hover:border-blue-100 transition-colors active:scale-[0.98]">
                                <div class="w-5 h-5 rounded-full bg-slate-200 text-slate-500 flex items-center justify-center flex-shrink-0 group-hover:bg-blue-200 group-hover:text-blue-600 transition-colors">
                                    <i class="fa-solid fa-map-pin text-[10px]"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-xs text-slate-600 break-all leading-relaxed">{{ item.address }}</p>
                                </div>
                                <i class="fa-regular fa-copy text-slate-300 text-xs group-hover:text-blue-400"></i>
                            </div>

                            <div class="flex items-start gap-2 text-xs">
                                <span class="bg-indigo-50 text-indigo-600 px-2 py-1 rounded-md font-bold whitespace-nowrap">
                                    <i class="fa-solid fa-note-sticky mr-1"></i>Á≠ÜË®ò
                                </span>
                                <span class="py-1 text-slate-600 leading-relaxed">{{ item.note }}</span>
                            </div>
                        </div>

                        <!-- Buttons (2x2) -->
                        <div class="grid grid-cols-2 gap-2.5">
                            <a :href="`nmap://search?query=${item.koreanName}`" 
                               class="h-10 rounded-xl bg-[#03C75A] text-white text-xs font-bold flex items-center justify-center gap-1.5 shadow-md shadow-green-500/20 hover:shadow-green-500/40 active:scale-95 transition-all">
                                <span class="font-black border border-white/30 w-3.5 h-3.5 rounded-sm flex items-center justify-center text-[8px]">N</span>
                                Âú∞Âúñ
                            </a>
                            
                            <a :href="getUberLink(item)" 
                               class="h-10 rounded-xl bg-slate-800 text-white text-xs font-bold flex items-center justify-center gap-1.5 shadow-md shadow-slate-500/20 hover:bg-slate-900 active:scale-95 transition-all">
                                <i class="fa-brands fa-uber"></i>
                                Âè´Ëªä
                            </a>

                            <template v-if="item.category === 'food'">
                                <a :href="`https://www.catchtable.net/search?keyword=${item.koreanName}`" 
                                   class="h-10 rounded-xl bg-[#FF3D00] text-white text-xs font-bold flex items-center justify-center gap-1.5 shadow-md shadow-red-500/20 hover:shadow-red-500/40 active:scale-95 transition-all">
                                    <i class="fa-solid fa-calendar-check"></i>
                                    Ë®Ç‰Ωç
                                </a>
                                <a :href="`nmap://search?query=${item.koreanName} Í∑ºÏ≤ò ÎßõÏßë`" 
                                   class="h-10 rounded-xl bg-white border border-slate-200 text-slate-600 text-xs font-bold flex items-center justify-center gap-1.5 shadow-sm hover:bg-slate-50 hover:text-cyan-600 hover:border-cyan-200 active:scale-95 transition-all">
                                    <i class="fa-solid fa-utensils"></i>
                                    ÈôÑËøëÊõø‰ª£
                                </a>
                            </template>

                            <template v-if="item.category === 'spot'">
                                <a :href="`nmap://search?query=${item.koreanName} Í∑ºÏ≤ò ÎßõÏßë`" 
                                   class="h-10 rounded-xl bg-white border border-slate-200 text-slate-600 text-xs font-bold flex items-center justify-center gap-1.5 shadow-sm hover:bg-amber-50 hover:text-amber-600 hover:border-amber-200 active:scale-95 transition-all">
                                    <i class="fa-solid fa-utensils"></i>
                                    ÈôÑËøëÁæéÈ£ü
                                </a>
                                <a :href="`nmap://search?query=${item.koreanName} Í∑ºÏ≤ò Í∞ÄÎ≥ºÎßåÌïúÍ≥≥`" 
                                   class="h-10 rounded-xl bg-white border border-slate-200 text-slate-600 text-xs font-bold flex items-center justify-center gap-1.5 shadow-sm hover:bg-cyan-50 hover:text-cyan-600 hover:border-cyan-200 active:scale-95 transition-all">
                                    <i class="fa-solid fa-map-location-dot"></i>
                                    ÈôÑËøëÊôØÈªû
                                </a>
                            </template>
                        </div>
                    </div>
                </div>
            </transition-group>
            
            <div class="h-12 flex items-center justify-center text-slate-300 text-xs">
                Made with <i class="fa-solid fa-heart mx-1 text-red-300"></i> for Busan
            </div>
        </main>

        <!-- FAB -->
        <div class="fixed bottom-6 right-5 flex flex-col gap-3 z-40">
            <button @click="exploreNearby('food')" 
                class="w-12 h-12 rounded-full bg-amber-500 text-white shadow-lg shadow-amber-500/40 flex items-center justify-center hover:scale-110 active:scale-95 transition-all">
                <i class="fa-solid fa-utensils"></i>
            </button>
            <button @click="exploreNearby('spot')" 
                class="w-14 h-14 rounded-full bg-gradient-to-r from-cyan-500 to-blue-600 text-white shadow-xl shadow-cyan-500/40 flex items-center justify-center hover:scale-110 active:scale-95 transition-all">
                <i class="fa-solid fa-compass text-2xl"></i>
            </button>
        </div>

        <!-- Help Modal -->
        <transition name="fade">
            <div v-if="showHelp" class="fixed inset-0 z-[100] flex items-center justify-center p-5">
                <div class="absolute inset-0 bg-slate-900/60 backdrop-blur-sm" @click="showHelp = false"></div>
                <div class="bg-white rounded-2xl w-full max-w-sm p-6 relative shadow-2xl space-y-4">
                    <button @click="showHelp = false" class="absolute top-4 right-4 text-slate-400 hover:text-slate-600">
                        <i class="fa-solid fa-times text-lg"></i>
                    </button>
                    
                    <div class="text-center space-y-2">
                        <div class="w-12 h-12 bg-cyan-100 text-cyan-600 rounded-full flex items-center justify-center mx-auto text-xl">
                            <i class="fa-brands fa-apple"></i>
                        </div>
                        <h3 class="text-lg font-bold text-slate-800">ÂÆâË£ùÂà∞‰∏ªÁï´Èù¢</h3>
                        <p class="text-sm text-slate-500">Â∞áÊ≠§Á∂≤È†ÅÂä†ÂÖ• iPhone Ê°åÈù¢Ôºå‰∫´ÂèóÂÖ®Ëû¢Âπï App È´îÈ©ó„ÄÇ</p>
                    </div>

                    <div class="bg-slate-50 rounded-xl p-4 space-y-3 text-sm text-slate-700">
                        <div class="flex items-center gap-3">
                            <span class="w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center font-bold text-xs">1</span>
                            <span>ÈªûÊìäÁÄèË¶ΩÂô®‰∏ãÊñπÁöÑ <i class="fa-solid fa-arrow-up-from-bracket mx-1 text-blue-500"></i> ÂàÜ‰∫´ÊåâÈàï</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center font-bold text-xs">2</span>
                            <span>ÈÅ∏Êìá„ÄåÂä†ÂÖ•‰∏ªÁï´Èù¢„Äç</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center font-bold text-xs">3</span>
                            <span>ÈªûÊìä„ÄåÊñ∞Â¢û„ÄçÂç≥ÂèØ</span>
                        </div>
                    </div>
                    
                    <button @click="showHelp = false" class="w-full py-3 rounded-xl bg-slate-800 text-white font-bold text-sm shadow-lg hover:bg-slate-900">
                        Áü•ÈÅì‰∫Ü
                    </button>
                </div>
            </div>
        </transition>
        
        <!-- Toast -->
        <transition name="fade">
            <div v-if="toast.show" class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-slate-800/90 backdrop-blur text-white px-6 py-3 rounded-2xl shadow-2xl z-[60] flex items-center gap-3">
                <i class="fa-solid fa-circle-check text-green-400"></i>
                <span class="font-medium text-sm">{{ toast.message }}</span>
            </div>
        </transition>

    </div>

    <script>
        const { createApp, ref, computed, onMounted } = Vue;

        createApp({
            setup() {
                const currentDay = ref(0);
                const weather = ref(null);
                const toast = ref({ show: false, message: '' });
                const showHelp = ref(false);

                const days = [
                    { name: "Day 1 (ÈÄ±Âõõ)", id: 1 },
                    { name: "Day 2 (ÈÄ±‰∫î)", id: 2 },
                    { name: "Day 3 (ÈÄ±ÂÖ≠)", id: 3 },
                    { name: "Day 4 (ÈÄ±Êó•)", id: 4 }
                ];

                const tripData = {
                    0: { // Day 1
                        items: [
                            { time: "08:30", category: "spot", name: "Spa Land", koreanName: "Ïä§ÌååÎûúÎìú ÏÑºÌÖÄÏãúÌã∞", address: "Î∂ÄÏÇ∞ Ìï¥Ïö¥ÎåÄÍµ¨ ÏÑºÌÖÄÎÇ®ÎåÄÎ°ú 35", note: "Ë£úÁú†„ÄÅÁîúÁ±≥Èú≤", hours: "09:00 - 22:00", lat: 35.1689, lng: 129.1319 },
                            { time: "13:00", category: "food", name: "Ê∞¥ÈÇäÊúÄÈ´òË±¨ËÇâÊπØÈ£Ø", koreanName: "ÏàòÎ≥ÄÏµúÍ≥†ÎèºÏßÄÍµ≠Î∞• ÏÑºÌÖÄÏ†ê", address: "Î∂ÄÏÇ∞ Ìï¥Ïö¥ÎåÄÍµ¨ ÏÑºÌÖÄ3Î°ú 26", note: "Ë®òÂæóÂä†Ëù¶ÈÜ¨ÊèêÂë≥", hours: "24Â∞èÊôÇÁáüÊ•≠", lat: 35.1685, lng: 129.1300 },
                            { time: "14:30", category: "spot", name: "Êñ∞‰∏ñÁïåÁôæË≤® Centum City", koreanName: "Ïã†ÏÑ∏Í≥ÑÎ∞±ÌôîÏ†ê ÏÑºÌÖÄÏãúÌã∞", address: "Î∂ÄÏÇ∞ Ìï¥Ïö¥ÎåÄÍµ¨ ÏÑºÌÖÄÎÇ®ÎåÄÎ°ú 35", note: "ÈÄõË°ó", hours: "10:30 - 20:00", lat: 35.1691, lng: 129.1296 },
                            { time: "16:30", category: "spot", name: "Solaria Nishitetsu Hotel", koreanName: "ÏÜîÎùºÎ¶¨ÏïÑ ÎãàÏãúÏ≤† Ìò∏ÌÖî Î∂ÄÏÇ∞", address: "Î∂ÄÏÇ∞ Î∂ÄÏÇ∞ÏßÑÍµ¨ ÏÑúÎ©¥Î°ú 20", note: "Check-in", hours: "Check-in: 15:00", lat: 35.1528, lng: 129.0560 },
                            { time: "18:30", category: "food", name: "ÈüìÁâõÁÉ§ËÇâ", koreanName: "Ïö∞ÏÇ¨Îûë", address: "Î∂ÄÏÇ∞ Î∂ÄÏÇ∞ÏßÑÍµ¨ Ï§ëÏïôÎåÄÎ°ú691Î≤àÍ∏∏ 52", note: "‰∫´ÂèóÈüìÁâõ", hours: "11:00 - 23:00", lat: 35.1517, lng: 129.0592 },
                            { time: "20:30", category: "spot", name: "Olive Young", koreanName: "Ïò¨Î¶¨Î∏åÏòÅ ÏÑúÎ©¥ÌÉÄÏö¥Ï†ê", address: "Î∂ÄÏÇ∞ Î∂ÄÏÇ∞ÏßÑÍµ¨ ÏÑúÎ©¥Î°ú 24", note: "Êé°Ë≤∑‰øùÈ§äÂìÅ", hours: "10:00 - 22:30", lat: 35.1542, lng: 129.0573 }
                        ]
                    },
                    1: { // Day 2
                        items: [
                            { time: "10:30", category: "spot", name: "Skyline Luge Busan", koreanName: "Ïä§Ïπ¥Ïù¥ÎùºÏù∏Î£®ÏßÄ Î∂ÄÏÇ∞", address: "Î∂ÄÏÇ∞ Í∏∞Ïû•Íµ∞ Í∏∞Ïû•Ïùç ÏãúÎûëÎ¶¨ ÏÇ∞60-1", note: "Áé©ÊªëÂù°Ëªä", hours: "10:00 - 19:00", lat: 35.1956, lng: 129.2132 },
                            { time: "13:00", category: "food", name: "101Áï™Âú∞ ÂçóÂ±±ÁÇ∏Ë±¨Êéí", koreanName: "101Î≤àÏßÄ ÎÇ®ÏÇ∞ÎèàÍπåÏä§ Î°ØÎç∞Î™∞ÎèôÎ∂ÄÏÇ∞Ï†ê", address: "Î∂ÄÏÇ∞ Í∏∞Ïû•Íµ∞ Í∏∞Ïû•Ïùç Í∏∞Ïû•Ìï¥ÏïàÎ°ú 147", note: "Ê®ÇÂ§©Outlet 3F (ÁÑ°Êµ∑ÈÆÆ)", hours: "10:30 - 21:00", lat: 35.1915, lng: 129.2120 },
                            { time: "14:30", category: "food", name: "Diart Coffee", koreanName: "ÎîîÏïÑÌä∏Ïª§Ìîº", address: "Î∂ÄÏÇ∞ Ìï¥Ïö¥ÎåÄÍµ¨ Ï≤≠ÏÇ¨Ìè¨Î°ú 128Î≤àÍ∏∏ 12", note: "ÂøÖÂêÉ Kaymak", hours: "10:30 - 21:30 (ÈÄ±‰∫å‰ºë)", lat: 35.1593, lng: 129.1932 },
                            { time: "16:30", category: "spot", name: "Êµ∑Èõ≤Âè∞Êµ∑Ê∞¥Êµ¥Â†¥", koreanName: "Ìï¥Ïö¥ÎåÄÌï¥ÏàòÏöïÏû•", address: "Î∂ÄÏÇ∞ Ìï¥Ïö¥ÎåÄÍµ¨ Ïö∞Îèô", note: "Êï£Ê≠•ÁúãÂ§ïÈôΩ", hours: "ÂÖ®Â§©ÈñãÊîæ", lat: 35.1587, lng: 129.1604 },
                            { time: "19:00", category: "food", name: "83ÁÉ§ËÇâ", koreanName: "83Ìï¥Ïπò", address: "Î∂ÄÏÇ∞ Î∂ÄÏÇ∞ÏßÑÍµ¨ ÏÑúÎ©¥Î°ú 68Î≤àÍ∏∏ 16", note: "‰∫∫Ê∞£‰ª£ÁÉ§ (ÂøÖÊéíÈöä)", hours: "16:00 - 01:00", lat: 35.1545, lng: 129.0567 },
                            { time: "21:30", category: "food", name: "Out Dark ÁÇ∏Èõû", koreanName: "ÏïÑÏõÉÎã≠ ÏÑúÎ©¥Ï†ê", address: "Î∂ÄÏÇ∞ Î∂ÄÏÇ∞ÏßÑÍµ¨ ÎèôÏ≤úÎ°ú85Î≤àÍ∏∏ 37", note: "ÂÆµÂ§úÈÖçÂï§ÈÖí", hours: "16:00 - 02:00", lat: 35.1553, lng: 129.0602 }
                        ]
                    },
                    2: { // Day 3
                        items: [
                            { time: "09:30", category: "spot", name: "ÁîòÂ∑ùÊ¥ûÊñáÂåñÊùë", koreanName: "Í∞êÏ≤úÎ¨∏ÌôîÎßàÏùÑ", address: "Î∂ÄÏÇ∞ ÏÇ¨ÌïòÍµ¨ Í∞êÎÇ¥2Î°ú 203", note: "Ë∑üÂ∞èÁéãÂ≠êÊãçÁÖß", hours: "09:00 - 18:00 (Âª∫Ë≠∞)", lat: 35.0975, lng: 129.0106 },
                            { time: "12:30", category: "food", name: "Âá°ËÉéÊâãÂ∑•ÁÇ∏ÈÜ¨È∫µ", koreanName: "Î≤îÌÉúÏòõÎÇ†ÏÜêÏßúÏû•", address: "Î∂ÄÏÇ∞ Î∂ÄÏÇ∞ÏßÑÍµ¨ Í∞ÄÏïºÎåÄÎ°ú784Î≤àÍ∏∏ 15", note: "Á≥ñÈÜãËÇâ+ÁÇ∏ÈÜ¨È∫µ", hours: "11:30 - 22:00", lat: 35.1558, lng: 129.0545 },
                            { time: "14:00", category: "spot", name: "NCÁôæË≤® Ë•øÈù¢Â∫ó", koreanName: "NCÎ∞±ÌôîÏ†ê ÏÑúÎ©¥Ï†ê", address: "Î∂ÄÏÇ∞ Î∂ÄÏÇ∞ÏßÑÍµ¨ ÎèôÏ≤úÎ°ú 92", note: "ÈÄõË°ó", hours: "10:30 - 21:00", lat: 35.1573, lng: 129.0628 },
                            { time: "20:00", category: "spot", name: "Âª£ÂÆâÈáåÊµ∑Ê∞¥Êµ¥Â†¥", koreanName: "Í¥ëÏïàÎ¶¨Ìï¥ÏàòÏöïÏû•", address: "Î∂ÄÏÇ∞ ÏàòÏòÅÍµ¨ Í¥ëÏïàÌï¥Î≥ÄÎ°ú 219", note: "Â§úÊôØ", hours: "ÂÖ®Â§©ÈñãÊîæ", lat: 35.1532, lng: 129.1187 }
                        ]
                    },
                    3: { // Day 4
                        items: [
                            { time: "10:30", category: "spot", name: "ÁôΩÈö™ÁÅòÊñáÂåñÊùë", koreanName: "Ìù∞Ïó¨Ïö∏Î¨∏ÌôîÎßàÏùÑ", address: "Î∂ÄÏÇ∞ ÏòÅÎèÑÍµ¨ ÏòÅÏÑ†Îèô4Í∞Ä 1044-6", note: "Êµ∑ÊôØ Aether Cafe", hours: "ÂÖ®Â§©ÈñãÊîæ (Â∫óËàñ‰∏ç‰∏Ä)", lat: 35.0783, lng: 129.0435 },
                            { time: "13:00", category: "food", name: "ÈáúÂ±±Ë±¨ËÖ≥", koreanName: "Î∂ÄÏÇ∞Ï°±Î∞ú", address: "Î∂ÄÏÇ∞ Ï§ëÍµ¨ Í¥ëÎ≥µÎ°ú 17-1", note: "ÂÜ∑ËèúË±¨ËÖ≥ (ÁÑ°Êµ∑ÈÆÆ)", hours: "10:00 - 00:30", lat: 35.0995, lng: 129.0267 },
                            { time: "14:30", category: "spot", name: "BIFF Âª£Â†¥", koreanName: "BIFF Í¥ëÏû•", address: "Î∂ÄÏÇ∞ Ï§ëÍµ¨ Íµ¨ÎçïÎ°ú 58-1", note: "Â†ÖÊûúÈªëÁ≥ñÈ§Ö", hours: "ÂÖ®Â§©ÈñãÊîæ", lat: 35.0987, lng: 129.0270 },
                            { time: "16:30", category: "spot", name: "Ê®ÇÂ§©Ë∂ÖÂ∏Ç ÂÖâÂæ©Â∫ó", koreanName: "Î°ØÎç∞ÎßàÌä∏ Í¥ëÎ≥µÏ†ê", address: "Î∂ÄÏÇ∞ Ï§ëÍµ¨ Ï§ëÏïôÎåÄÎ°ú 2", note: "‰º¥ÊâãÁ¶Æ", hours: "10:30 - 23:00 (ÊØèÊúàÁ¨¨2/4ÈÄ±Êó•‰ºë)", lat: 35.0967, lng: 129.0345 },
                            { time: "18:30", category: "food", name: "ÂçóÊµ¶ËîòÈõûÊπØ", koreanName: "ÎÇ®Ìè¨ÏÇºÍ≥ÑÌÉï", address: "Î∂ÄÏÇ∞ Ï§ëÍµ¨ ÎÇ®Ìè¨Í∏∏ 16", note: "ÊöñËÉÉ‰∏äÈ£õÊ©ü", hours: "10:30 - 21:00", lat: 35.0984, lng: 129.0310 }
                        ]
                    }
                };

                const currentDayData = computed(() => tripData[currentDay.value]);

                const weatherIcon = computed(() => {
                    if (!weather.value) return '‚òÄÔ∏è';
                    const code = weather.value.weathercode;
                    if (code <= 1) return '‚òÄÔ∏è';
                    if (code <= 3) return '‚õÖ';
                    if (code <= 48) return 'üå´Ô∏è';
                    if (code <= 67) return 'üåßÔ∏è';
                    if (code <= 77) return '‚ùÑÔ∏è';
                    return 'üå¶Ô∏è';
                });

                const fetchWeather = async () => {
                    try {
                        const res = await axios.get('https://api.open-meteo.com/v1/forecast?latitude=35.1796&longitude=129.0756&current_weather=true');
                        weather.value = res.data.current_weather;
                    } catch (e) {
                        console.error("Weather fetch failed");
                    }
                };

                const copyAddress = (text) => {
                    navigator.clipboard.writeText(text).then(() => {
                        showToast('Â∑≤Ë§áË£ΩËá≥Ââ™Ë≤ºÁ∞ø');
                    });
                };

                // Native Share for LINE support
                const shareLocation = async (item) => {
                    const url = `https://map.naver.com/p/search/${encodeURIComponent(item.koreanName)}`;
                    const shareData = {
                        title: item.name,
                        text: `üìç ${item.name}\n${item.koreanName}\n${item.address}`,
                        url: url
                    };

                    try {
                        if (navigator.share) {
                            await navigator.share(shareData);
                        } else {
                            // Fallback for desktop or non-supported browsers
                            await navigator.clipboard.writeText(`${shareData.text}\n${shareData.url}`);
                            showToast('Â∑≤Ë§áË£ΩÂú∞ÈªûË≥áË®ä (ÂèØË≤º‰∏äËá≥ LINE)');
                        }
                    } catch (err) {
                        console.log('Share dismissed');
                    }
                };

                const getUberLink = (item) => {
                    // Priority: GPS -> Address
                    if (item.lat && item.lng) {
                         const encodedName = encodeURIComponent(item.koreanName);
                         return `https://m.uber.com/ul/?action=setPickup&pickup=my_location&dropoff[latitude]=${item.lat}&dropoff[longitude]=${item.lng}&dropoff[nickname]=${encodedName}`;
                    }
                    const encodedAddr = encodeURIComponent(item.address);
                    const encodedName = encodeURIComponent(item.koreanName);
                    return `https://m.uber.com/ul/?action=setPickup&pickup=my_location&dropoff[formatted_address]=${encodedAddr}&dropoff[nickname]=${encodedName}`;
                };

                const exploreNearby = (type) => {
                    if (!navigator.geolocation) {
                        showToast("ÊÇ®ÁöÑË£ùÁΩÆ‰∏çÊîØÊè¥ÂÆö‰Ωç");
                        return;
                    }
                    showToast("Ê≠£Âú®Áç≤Âèñ‰ΩçÁΩÆ...");
                    navigator.geolocation.getCurrentPosition((pos) => {
                        const { latitude, longitude } = pos.coords;
                        const query = type === 'food' ? 'ÎßõÏßë' : 'Í∞ÄÎ≥ºÎßåÌïúÍ≥≥';
                        window.location.href = `nmap://search?query=${query}&lat=${latitude}&lng=${longitude}`;
                    }, () => {
                        showToast("ÁÑ°Ê≥ïÁç≤Âèñ‰ΩçÁΩÆÔºåË´ãÊ™¢Êü•Ê¨äÈôê");
                    });
                };

                const showToast = (msg) => {
                    toast.value = { show: true, message: msg };
                    setTimeout(() => toast.value.show = false, 2000);
                };

                onMounted(() => {
                    fetchWeather();
                });

                return {
                    currentDay,
                    days,
                    currentDayData,
                    weather,
                    weatherIcon,
                    copyAddress,
                    shareLocation,
                    getUberLink,
                    exploreNearby,
                    toast,
                    showHelp
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
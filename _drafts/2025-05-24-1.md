---
layout: default_post
title:  "0018. 解決 Dotnet Build & MSBuild Jenkins 錯誤 error MSB4166: Child node exited prematurely. Shutting down"
excerpt: "Jenkins"
tags: 
- "Jenkins"
- "Continuous Integration(CI)"
- "Continuous Deployment(CD)"
- "Docker"
- "Docker-Compose"
- "Container"
- "Ubuntu"
- "Linux"
---

<div class="summary">
<br/>應用所需：1. jenkins 主機
<br/>解決問題：Jenkin CICD 部署時，發生錯誤 MSB4166: Child node exited prematurely. Shutting down 的解決方法
<br/>相關參考：<a href="https://stackoverflow.com/questions/7916687/error-msb4166-child-node-exited-prematurely-shutting-down">StakeOverFlow討論</a>
<br/>基本介紹：本篇分為3大部分。
<br/>第一部分：部署架構
<br/>第二部分：問題描述 & 原因
<br/>第三部分：解決方法 & Demo 結果
</div>

<div class="title">
    <br/><hr class="titleinner">
	<span></span>
	<hr class="titleinner"><br/>
</div>


<br/><br/>
<h1>第一部分：部署架構</h1>

<h2>Step 1：部署架構</h2>
https://github.com/pnpm/pnpm/issues/4897

docker RUN pnpm build FATAL ERROR: Reached heap limit Allocation failed - JavaScript heap out of memory

<br/> <img src="/assets/image/ContinuousDeployment/Jenkins/2025_05_24/000.png" alt="" width="100%" height="100%" />
<br/><br/>



<br/><br/>
<h1>第二部分：問題描述 & 原因</h1>

<h2>Step 1：問題</h2>
問題出現在 **紅框** 的地方

<br/> <img src="/assets/image/ContinuousDeployment/Jenkins/2025_05_24/000_2.png" alt="" width="100%" height="100%" />
<br/><br/>



<br/><br/>
<h1>第三部分：解決方法 & Demo 結果</h1>

<h2>Step 1：解決方法 - Dotnet Core</h2>
如果是 Asp.net Core 專案，在建置過程中，添加以下參數

``` Shell
--disable-build-servers 
```

<br/>完整範例(Ubuntu 上的 Shell 指令)：

``` Shell
dotnet publish XXX.csproj -c Release -o publish/Output --disable-build-servers 
```

<br/><br/>

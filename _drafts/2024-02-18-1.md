---
layout: default_post
title:  "0003. 取得用戶瀏覽器指紋 前端工具 FingerprintJS 介紹"
excerpt: "Frontend"
tags: FingerprintJS javascript html
---

<div class="summary">
<br/>解決問題：1. 如何引入 FingerprintJS 得到當前用戶瀏覽器的指紋(唯一身分證識別碼)
<br/>&emsp;&emsp;&emsp;&emsp;&emsp;2. 用途：a.分析用戶資訊 b.安全性上保證是同一個用戶 
<br/>&emsp;&emsp;&emsp;&emsp;&emsp;3. 官方評估：免費版準確率 40-60% 付費版準去率達 99.5%
<br/>官方開源：<a href="https://github.com/fingerprintjs/fingerprintjs/?tab=readme-ov-file">官方 Github</a>
<br/>Demo範例：<a href="https://gotoa1234.github.io/example/Frontend/LibraryTool/fingerprintjsExample.html">連結</a>
<br/>基本介紹：本篇分為3大部分。
<br/>第一部分：介紹 FingerprintJS 
<br/>第二部分：如何使用代碼
<br/>第三部分：Demo成果
</div>

<div class="title">
    <br/><hr class="titleinner">
	<span></span>
	<hr class="titleinner"><br/>
</div>


<br/><br/>
<h1>第一部分：介紹 FingerprintJS  </h1>
<h2>Step 1：是什麼樣的工具</h2>
<a href="https://fingerprint.com/">https://fingerprint.com/</a>是一個提供辨識該使用者在使用瀏覽器時，能透過雜湊碼產生該使用者的瀏覽器指紋序號(Browser Fingerpring)
<br/>除了產生唯一的序號可以分辨是否同一個使用者外，還能得到該用戶使用瀏覽器時當前裝置設備相關資訊。
<br/>產生的唯一序號就是透過使用者當前的裝置配置值來組成唯一值
<br/><br/>

<h2>Step 2：瀏覽器指紋 & 特徵</h2>
是一種用於識別和區分不同設備或瀏覽器的技術。它基於訪問者瀏覽器的各種屬性和特徵，這些特徵通常是瀏覽器和設備之間的獨特組合，可以用來創建一個唯一的識別標識，稱為指紋。
<br/>以下是一些可能用於瀏覽器指紋識別的特徵：

{:class="table table-bordered"}
| 使用者代理（User Agent）： | 瀏覽器發送的 HTTP 請求中包含使用者代理信息，這包括瀏覽器類型、版本和作業系統等信息。 | 
| 螢幕分辨率和顏色深度： | 設備螢幕的分辨率和顏色深度可以提供獨特的識別信息。 | 
| 插件和擴充： |  安裝的瀏覽器插件和擴充可以提供額外的特徵，如 Flash、Java、PDF 插件等。 | 
| 字體信息： | 瀏覽器能夠提供安裝的字體信息，這也可以用作一個獨特的指紋特徵。 | 
| 時區和語言設置： | 訪問者的時區和語言設置也是可能的指紋特徵。 | 
| 硬體信息： | 例如，檢測 WebGL 的支援和性能、Canvas 繪圖能力，以及硬體指紋等。 | 
| Cookie： | 瀏覽器中存儲的 cookie 信息，特別是用於識別訪問者的 cookie。 | 
| 屏幕顯示： | 關於顯示器的信息，例如畫布指紋（Canvas Fingerprinting）。 | 

<br/> <img src="/assets/image/Frontend/LibraryTool/2024_02_03/001.png" width="50%" height="50%" />
<br/><br/>


<h2>Step 3：免費版使用限制</h2>
免費版的準確率官方給的準確率是 40-60%
<br/>付費版可達 99.5%
<br/>但如果特徵值使用得當，或者用於分析用戶資料的話，免費版功能是相當夠用的。
<br/> <img src="/assets/image/Frontend/LibraryTool/2024_02_03/001.png" width="50%" height="50%" />
<br/><br/>

<h2>Step 4：付費版和免費版的差異</h2>
<a href="https://dev.fingerprint.com/docs/identification-vs-fingerprintjs">開發者指南上的比較說明</a>
<br/>Fingerprintjs 與 Pro版(付費版)的重點差異：

{:class="table table-bordered"}
| | Js免費版 | Pro付費版 | 
| --- | --- | --- | 
| 基本辨識(螢幕、設備、作業系統) | ✔️ | ✔️ |
| 進階辨識(畫布、聲音、字型) | ✔️ | ✔️ |
| 智慧訊號(機器人偵測、使用者行為) |  | ✔️ |
| 序號碰撞率 | 普通 | 幾乎不會 |
| 序號保存期限 | 一周 | 數月 ~ 幾年 |


<br/><br/>

<h2>Step 4：免費帳號(無帳號)的功能說明</h2>
<a href="https://ipinfo.io/pricing">ipinfo.io 官網的價格說明</a>拉到最下方會有API資訊。
<br/>重點：免費版不能得知該IP 是否有VPN，所以不能確定是否為真實IP，但是通常自己有沒有 VPN 自己會知道，所以可以用此查自己真實IP
<br/>這邊把功能差異重點整理，標準以上還有更多，有需要再參考網站：

{:class="table table-bordered"}
|     | 免費版 | 基本版 | 標準 | 商業 | 企業 |
| --- | --- | --- | --- | --- | --- |
| IP位址   | ✔️ | ✔️ | ✔️ | ✔️  | ✔️ |
| 國家     | ✔️ | ✔️ | ✔️ | ✔️  | ✔️ |
| 地區     | ✔️ | ✔️ | ✔️ | ✔️  | ✔️ |
| 城市位址 | ✔️ | ✔️ | ✔️ | ✔️  | ✔️ |
| 郵遞區號 | ✔️ | ✔️ | ✔️ | ✔️  | ✔️ |
| 時區     | ✔️ | ✔️ | ✔️ | ✔️  | ✔️ |
| 經緯度   | ✔️ | ✔️ | ✔️ | ✔️  | ✔️ |
| ASN      |    | ✔️ | ✔️ | ✔️  | ✔️ |
| 隱私檢測  |    |    | ✔️ | ✔️  | ✔️ |


<br/>ASN：包含 ASN(自治系統編號)、域名、路由器的IP
<br/>隱私檢測：檢查是否有 VPN、Proxy 
<br/> <img src="/assets/image/Frontend/LibraryTool/2024_02_03/002.png" width="50%" height="50%" />
<br/><br/>


<br/><br/>
<h1>第二部分：如何使用代碼</h1>
<h2>Step 1：新建一個 html檔</h2>
隨意建立一個.html檔案

<br/> <img src="/assets/image/Frontend/LibraryTool/2024_02_03/004.png" width="50%" height="50%" />
<br/><br/>

<h2>Step 2：貼上代碼</h2>
將以下代碼貼上到 html 上

``` html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ipinfo.io Example</title>
</head>
<body>

<table border="1">
    <tr>
	    <th>中文屬性(Chinese Property)</th>
        <th>屬性(Property)</th>
        <th>值(Value)</th>
    </tr>
</table>

<script>
    // 使用 Fetch API 向 ipinfo.io 發送請求
    fetch('https://ipinfo.io/json')
        .then(response => response.json())
        .then(data => {
            // data 包含了用戶的 IP 地址相關信息
            displayInfo('IP地址', 'IP Address', data.ip);
            displayInfo('主機名稱','Hostname', data.hostname);
            displayInfo('城市', 'City', data.city);
            displayInfo('地區', 'Region', data.region);
            displayInfo('國家', 'Country', data.country);
            displayInfo('經緯度', 'Loc', data.loc);            
            displayInfo('互聯網服務提供商', 'ISP', data.org);
            displayInfo('所在時區', 'Timezone', data.timezone);
        })
        .catch(error => {
            console.error('Error fetching IP info:', error);
        });

    function displayInfo(chProperty, property, value) {
        // 在表格中插入一行
        var table = document.querySelector('table');
        var row = table.insertRow(-1);

        // 插入單元格
        var cell1 = row.insertCell(0);
        var cell2 = row.insertCell(1);
		var cell3 = row.insertCell(2);

        // 設置單元格的內容
        cell1.textContent = chProperty;
        cell2.textContent = property;
		cell3.textContent = value;
    }
</script>

</body>
</html>
```

<br/> <img src="/assets/image/Frontend/LibraryTool/2024_02_03/005.png" width="50%" height="50%" />
<br/><br/>

<h2>Step 3：代碼解釋 - 引入官網API</h2>
在 script 中，引用此段

```
fetch('https://ipinfo.io/json')
```

<br/><br/>

<h2>Step 4：代碼解釋 - 取得免費版權限的資料</h2>
將每個資料取回，目前免費版只能取得此8個，但自用已可
<br/>如果需要作為小型專案產品，申請一個免費帳戶，可以使用至多 50000 次

```
.then(response => response.json())
        .then(data => {
            // data 包含了用戶的 IP 地址相關信息
            displayInfo('IP地址', 'IP Address', data.ip);
            displayInfo('主機名稱','Hostname', data.hostname);
            displayInfo('城市', 'City', data.city);
            displayInfo('地區', 'Region', data.region);
            displayInfo('國家', 'Country', data.country);
            displayInfo('經緯度', 'Loc', data.loc);            
            displayInfo('互聯網服務提供商', 'ISP', data.org);
            displayInfo('所在時區', 'Timezone', data.timezone);
        })
```

<br/><br/>

<br/><br/>
<h1>第三部分：Demo成果</h1>
<h2>Step 1：開啟範例檔案</h2>
可參考<a href="https://gotoa1234.github.io/example/Frontend/LibraryTool/httpsipinfo.ioExample.html">範例檔案(連結)</a>，可以看到資料皆可取得，在沒有使用 VPN 的情況下，可以查找自己於互聯網中的 real IP
<br/> <img src="/assets/image/Frontend/LibraryTool/2024_02_03/003.png" width="50%" height="50%" />
<br/><br/>


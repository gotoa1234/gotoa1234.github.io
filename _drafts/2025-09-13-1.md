---
layout: default_post
title: "0010. Portainer 的進階使用 - 適合初學者的 Docker 管理工具"
excerpt: "Docker"
tags: 
- "Docker"
- "Container"
- "Portainer"
- "Ubuntu"
- "Linux"
---

<div class="summary">
<br/>應用所需：1. 已安裝 Portainer
<br/>解決問題：Portainer 管理上的應用 & 定位 & 快速用法
<br/>相關參考：<a href="https://gotoa1234.github.io/2024/05/12/1.html">0002. Ubuntu 上使用 Docker 管理工具 Portainer </a>
<br/>基本介紹：本篇分為 5 部分。
<br/>第一部分：Portainer 前言 - 適用對象 & 本篇摘要
<br/>第二部分：使用者與群組權限設定
<br/>第三部分：連接多台機器的環境管理
<br/>第四部分：應用模板 (App Templates)
<br/>第五部分：Stack 管理
</div>

<div class="title">
    <br/><hr class="titleinner">
	<span></span>
	<hr class="titleinner"><br/>
</div>

<br/><br/>
<h1>第一部分：Portainer 前言 - 適用對象 & 本篇摘要</h1>

<h2>Step 1：本篇前言、目標</h2>
對許多剛接觸 Docker 的開發團隊來說，CLI 指令操作門檻高、錯誤難以排查，是導入容器化的第一道障礙。
<br/>Portainer 作為一款輕量級的 Docker 可視化管理工具，提供直覺的網頁介面，讓用戶能夠輕鬆部署應用、管理權限、監控節點狀態，甚至跨主機操作容器。
<br/>而在免費的 CE 版本中，也包含了許多足以應對中小型開發需求的實用功能。

<br/><br/>


<h2>Step 2：本篇目標</h2>
本篇文章旨在介紹 Portainer CE (Community Edition) 的幾個核心功能，包含以下功能：

{:class="table table-bordered"}
| 項目  | 說明 |
| ----- | ---- |
| 1. 連接多台機器的環境管理 | 示範如何將多台 Docker 主機（本地或遠端）加入 Portainer 的環境中集中管理，適合有多節點需求的小型開發或測試團隊使用。 |
| 2. 使用者與群組權限設定 | 介紹 Portainer CE 中的使用者與群組管理機制，並說明在 CE 版本下如何進行基本的角色分工與存取控制，CE 主要用於訪問多台機器的檢視。 |
| 3. 應用模板 (App Templates) | 解說如何使用 Portainer 提供的預設應用模板快速部署常用應用，以及自訂模板的建立方式，加速開發測試環境的搭建流程。 |
| 4. Stack 管理 | 說明如何透過 Portainer 建立、部署與管理 Docker Stack，包括 YAML 編排、環境變數設置與服務版本控制，讓多容器應用可以更有條理地管理。 |

<br/>**最終目標**：讓讀者了解如何使用 Portainer 提升容器部署與管理的效率，並協助團隊在不熟悉指令操作的情況下，**快速上手 Docker 生態系**。
<br/><br/>


<h2>Step 3：適用群體、對象</h2>
本篇主要適用的對象如下，適合團隊剛開始導入 Docker 容器管理工具時參考。

{:class="table table-bordered"}
| 1. Docker 有基本認識，但不熟悉 CLI 操作的開發者  |
| 2. 希望建立簡單容器化管理介面的小型或中型團隊     |
| 3. 正在尋找免費工具管理多台 Docker 主機環境的 IT 或 DevOps 工程師 |
| 4. 正在評估 Portainer 是否能作為內部部署工具的技術決策者 |

<br/><br/>


<h2>Step 4：補充 - Portainer 與建議管理 </h2>
以下是團隊與規模的初步評估，若開發團隊中有不熟悉容器化管理成員，可以採用 Portainer 讓成員快速熟悉。
<br/>待整體熟系容器化生態系後，可以逐步減少 Portainer 的依賴。

{:class="table table-bordered"}
| 團隊屬性                    | 建議管理方式                                                     |
| ----------------------- | ---------------------------------------------------------- |
| 新創 / 團隊小 / 成員不熟 Docker  | ✅ Portainer Template + Webhook                             |
| 中大型團隊 / DevOps 團隊健全     | ✅ Jenkins + GitOps / SSH 部署                                |
| 混合團隊（部分人 DevOps，部分人偏開發） | ✅ Portainer + Jenkins 整合（用 Jenkins 下達 Webhook 給 Portainer） |

<br/><br/>



<br/><br/>
<h1>第二部分：連接多台機器的環境管理</h1>

<h2>Step 1：多環境管理機器架構 & 本節目標</h2>
我們目前已在 **192.168.51.93** 安裝了 Portainer，但若有多台機器要管理話，就需要對其他機器做設定
<br/>如下圖，我們還有一台機器 **192.168.51.94** 當前已安裝了 Docker
<br/>最終目標： 192.168.51.93 可以監控 192.168.51.94 機器，可以不用登入 192.168.51.94 就能觀察到該機器的 Docker Container 狀態
<br/>※並且可以有視覺化的方式監控，對剛熟悉者較友善
<br/> <img src="/assets/image/ContinuousDeployment/docker/2025_09_13/000.png" alt="" width="50%" height="50%" />
<br/><br/>


<h2>Step 2：設定 Enviroments</h2>
登入 Portainer -> 選擇左下角的 Settings 中的 Enviroemnt -> 選擇右上角的 Add enviroment
<br/>目前管理只有看到自己的 **local** 
<br/> <img src="/assets/image/ContinuousDeployment/docker/2025_09_13/001.png" alt="" width="50%" height="50%" />
<br/><br/>

<h2>Step 3：選擇 Docker Standalone</h2>
進入後，選擇 **Docker Standalone** -> 選擇按鈕 Start Wizard 
<br/>目的是可以訪問另一台已安裝 Docker 的機器
<br/> <img src="/assets/image/ContinuousDeployment/docker/2025_09_13/002.png" alt="" width="50%" height="50%" />
<br/><br/>

<h2>Step 4：設定 Agent - 複製語法</h2>
選擇 Agent -> 點擊 Copy Command 
<br/>此語法是用來安裝另一台被監控機器設定為 Agent ，使得本機的 Portainer 可以訪問被監控機器
<br/> <img src="/assets/image/ContinuousDeployment/docker/2025_09_13/003.png" alt="" width="50%" height="50%" />
<br/><br/>

<h2>Step 5：設定 Agent - 複製語法</h2>
選擇 Agent -> 點擊 Copy Command 
<br/>此語法是用來安裝另一台被監控機器設定為 Agent ，使得本機的 Portainer 可以訪問被監控機器
<br/> <img src="/assets/image/ContinuousDeployment/docker/2025_09_13/004.png" alt="" width="50%" height="50%" />
<br/><br/>





<br/><br/>
<h1>第三部分：使用者與群組權限設定</h1>
<br/>


<h2>Step 1：介紹 cAdvisor</h2>


| 功能需求           | 是否可用於 Portainer CE       |
| -------------- | ------------------------ |
| 建立多個使用者帳號      | ✅                        |
| 控制誰可以部署 Stack  | 🚫                       |
| 限制使用者只能查看容器    | 🚫                       |
| 統一管理多主機        | ✅（透過 Endpoints + Agents） |
| 指定團隊只能存取某一主機   | ✅                        |
| 自訂操作權限（如不允許刪除） | 🚫                       |


<br/> <img src="/assets/image/ContinuousDeployment/docker/2025_09_13/000.png" alt="" width="50%" height="50%" />
<br/><br/>




<br/><br/>
<h1>第四部分：應用模板 (App Templates)</h1>

<h2>Step 1：Stack</h2>
<br/> <img src="/assets/image/ContinuousDeployment/docker/2025_09_13/000.png" alt="" width="50%" height="50%" />
<br/><br/>


<br/><br/>
<h1>第五部分：Stack 管理</h1>

<h2>Step 1：Stack</h2>
<br/> <img src="/assets/image/ContinuousDeployment/docker/2025_09_13/000.png" alt="" width="50%" height="50%" />
<br/><br/>


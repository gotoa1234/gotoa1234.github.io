---
layout: default_post
title: "0003. 已建立的 Docker Container 進行編輯資料的方式"
excerpt: "Docker"
tags: Docker Container Ubuntu Vim
---

<div class="summary">
<br/>應用所需：1. Ubuntu 
<br/>&emsp;&emsp;&emsp;&emsp;&emsp;2. 已安裝 Docker 並啟動了 RabbitMQ 容器
<br/>解決問題：容器化運行後，如何編輯容器內的設定檔案，以 RabbitMQ 舉例，提供 3 種常用作法
<br/>基本介紹：本篇分為 4 部分。
<br/>第一部分：RabbitMQ 容器為例
<br/>第二部分：複製出容器內的設定檔案
<br/>第三部分：擴增容器的 Volumn
<br/>第四部分：容器內新增 Pluging 進行編輯檔案
</div>

<div class="title">
    <br/><hr class="titleinner">
	<span></span>
	<hr class="titleinner"><br/>
</div>

<br/><br/>

<h1>第一部分：RabbitMQ 容器為例</h1>
<h2>Step 1：參考上篇設置</h2>
假設參考了 <a href="https://gotoa1234.github.io/2024/04/28/1.html#h1_2">0001. Ubuntu 上安裝 Docker 與各個容器、Asp.net Core網站</a>
<br/>建立了 RabbitMq 容器 (※同下指令)

``` bash
sudo docker volume create redis_volume_dev
docker run -d --name redis_dev -p 6379:6379 --restart=always -v redis_volume_dev:/data redis:latest
```

<br/>


<h2>Step 2：介面化啟用 - 1</h2>
預設的RabbitMQ 介面未啟用統計圖表
<br/>如下圖：
<br/> <img src="/assets/image/ContinuousDeployment/docker/2024_05_19/004.png" width="50%" height="50%" />
<br/>


<h2>Step 3：介面化啟用 - 2</h2>
可以輸入以下指令進入 Container 容器中

``` bash
docker exec -it 您的容器名稱 bash
```

<br/>進入指定位置

``` bash
cd /etc/rabbitmq/conf.d/
```


<br/> <img src="/assets/image/ContinuousDeployment/docker/2024_05_19/002.png" width="50%" height="50%" />
<br/>

<h2>Step 4：介面化啟用 - 完成</h2>
輸入以下指令啟用介面化

``` bash
echo management_agent.disable_metrics_collector = false > management_agent.disable_metrics_collector.conf
```

<br/> <img src="/assets/image/ContinuousDeployment/docker/2024_05_19/003.png" width="50%" height="50%" />
<br/>

<h2>Step 5：介面化啟用 - 畫面</h2>
可以看到類似如下的圖表(要先發送資料)

<br/> <img src="/assets/image/ContinuousDeployment/docker/2024_05_19/005.png" width="50%" height="50%" />
<br/>





<br/><br/>
<h1>第二部分：複製出容器內的設定檔案</h1>

<h2>Step 1：目的</h2>
我們目標是將 Rabbitmq 介面化關閉，在 第一部分 Step 4. 中，模擬編輯容器內的設定。
<br/>同以下語法：

``` Bash
echo management_agent.disable_metrics_collector = true > management_agent.disable_metrics_collector.con
```

<br/>


<h2>Step 2：建立一個資料夾</h2>
首先在 Container 的宿主機上建立一個資料夾
<br/> <img src="/assets/image/ContinuousDeployment/docker/2024_05_19/006.png" width="50%" height="50%" />
<br/>

<h2>Step 3：登入宿主機</h2>
移動到新建的資料夾下

``` Bash
cd \louistemp
```

<br/> <img src="/assets/image/ContinuousDeployment/docker/2024_05_19/007.png" width="50%" height="50%" />
<br/>

<h2>Step 4：將容器內的資料複製出來</h2>
輸入以下指令將檔案複製出來
<br/>

``` Bash
docker cp 您的容器名稱:/etc/rabbitmq/conf.d/management_agent.disable_metrics_collector.conf  /louistemp 
```

<br/>將檔案 management_agent.disable_metrics_collector.conf 複製到宿主機的 louistemp 資料夾中
<br/> <img src="/assets/image/ContinuousDeployment/docker/2024_05_19/008.png" width="50%" height="50%" />
<br/>

<h2>Step 5：編輯檔案</h2>
將 false 改為 true 並且保存
<br/> <img src="/assets/image/ContinuousDeployment/docker/2024_05_19/010.png" width="50%" height="50%" />
<br/>

<h2>Step 6：覆蓋回容器</h2>
輸入以下指令，將檔案從宿主機覆蓋容器中：

``` bash
docker cp /louistemp/management_agent.disable_metrics_collector.conf rabbitmq_qat:/etc/rabbitmq/conf.d/management_agent.disable_metrics_collector.conf  
```

<br/> <img src="/assets/image/ContinuousDeployment/docker/2024_05_19/011.png" width="50%" height="50%" />
<br/>

<h2>Step 7：重啟容器</h2>
輸入以下指令重新啟動容器：

``` bash
docker restart 您的容器名稱
```

<br/>

<h2>Step 8：驗證結果</h2>
可以確認已經關閉介面化
<br/> <img src="/assets/image/ContinuousDeployment/docker/2024_05_19/012.png" width="50%" height="50%" />
<br/>


<br/><br/>
<h1>第三部分：擴增容器的 Volumn</h1>

<h2>Step 1：目的</h2>
我們目標是將 Rabbitmq 介面化關閉，在 第一部分 Step 4. 中，模擬編輯容器內的設定。
<br/>同以下語法：

``` Bash
echo management_agent.disable_metrics_collector = true > management_agent.disable_metrics_collector.con
```

<br/>





<br/><br/>
<h1>第四部分：容器內新增 Pluging 進行編輯檔案</h1>

<h2>Step 1：目的</h2>
我們目標是將 Rabbitmq 介面化關閉，在 第一部分 Step 4. 中，模擬編輯容器內的設定。
<br/>同以下語法：

``` Bash
echo management_agent.disable_metrics_collector = true > management_agent.disable_metrics_collector.con
```

<br/>


---
layout: default_post
title: "0099. Google 提供的機器人防護服務 - 實作導入 reCAPTCHA 到 C# 網站"
excerpt: "C# 學習筆記"
tags: 
- "Asp.NET Core"
- "reCAPTCHA"
- "Google Cloud Platform"
- "Asp.NET Core"
- "Asp.NET Core Web MVC"
- "C#"
- "Azure"
- "Selenium"
- "Web"
---

<div class="summary">
<br/>範例所需： 1. Visual Studio 2022 Asp.net Core
<br/>&emsp;&emsp;&emsp;&emsp;&emsp; 2. 開通 Google Cloud Platform 便於管理 reCAPTCHA 金鑰設定 (要有 Google 帳號啟用)
<br/>範例檔案：<a href="https://github.com/gotoa1234/MyBlogExample/tree/main/GoogleCloudStorageSupportS3APIExample">本篇範例代碼</a>
<br/>解決問題：如何啟用 Google 的 reCAPTCHA 並且導入 Asp.net Core C# Web ，達到防止機器人攻擊的效果，保護自己的網站
<br/>&emsp;&emsp;&emsp;&emsp;&emsp; 2. 2025/8月為止，說明當前 Google reCAPTCHA 的 3 種類型導入與用法
<br/>基本介紹：本篇分為六大部分。
<br/>第一部分：reCAPTCHA 介紹
<br/>第二部分：啟用配置 & 管理金鑰
<br/>第三部分：範例專案架構
<br/>第四部分：reCAPTCHA DEMO - 隱形 reCAPTCHA 標記
<br/>第五部分：reCAPTCHA DEMO -「我不是機器人」核取方塊
<br/>第六部分：reCAPTCHA DEMO - 以分數為依據 (v3)
</div>

<div class="title">
    <br/><hr class="titleinner">
	<span></span>
	<hr class="titleinner"><br/>
</div>


<br/><br/>
<h1>第一部分：reCAPTCHA 介紹</h1>

<h2>Step 1： 介紹</h2>
Google 官方的<a href="https://cloud.google.com/recaptcha/docs/overview?hl=zh-tw">reCAPTCHA 總覽</a>

``` Markdown
reCAPTCHA 採用進階風險分析技術偵測詐欺行為，您可以透過 reCAPTCHA 保護網站或行動應用程式免受垃圾內容和濫用行為侵擾，並偵測其他類型的詐欺活動，例如憑證填充、帳戶盜用 (ATO) 和自動建立帳戶。
reCAPTCHA 提供更精細的分數、高風險事件的原因代碼、行動應用程式 SDK、密碼外洩偵測、多重驗證 (MFA)，以及調整網站專屬模型的功能，可保護企業業務。
```

<br/>目的就是保護自己架設的網站、應用程式，避免**自動化濫用（Automated Abuse）**
<br/>常見的程式自動化功能：

{:class="table table-bordered"}
| 項目  | 說明 |
| ----- | ---- |
| **1. 惡意機器人 / 爬蟲** | 抓取大量資料（例如價格、文章內容、會員資料） |
| **2. 暴力破解** | 不停嘗試帳號密碼登入 |
| **3. 垃圾訊息** | 在表單、留言區、自動送廣告連結 |
| **4. 資源消耗攻擊** | 刷光你的 API 配額(簡訊、寄信、第三方API使用次數) |
| **5. 批量註冊**  | 用腳本短時間建立成千上萬個假帳號 |

<br/><img src="/assets/image/LearnNote/2025_09_20/000.png" alt="" width="70%" height="70%" />
<br/><br/>

<h2>Step 2： 可用方案</h2>
在 Google 的<a href="https://cloud.google.com/recaptcha/docs/compare-tiers?hl=zh-tw">reCAPTCHA參考指南</a>裡，有列出 3 種方案類型：



<br/>
<br/><img src="/assets/image/LearnNote/2025_09_20/000.png" alt="" width="70%" height="70%" />
<br/><br/>


<h2>Step 3： 方案收費方式</h2>



<br/>
<br/><img src="/assets/image/LearnNote/2025_09_20/000.png" alt="" width="70%" height="70%" />
<br/><br/>


<h2>Step 4： 方案與應用場景</h2>


``` Markdown
reCAPTCHA 採用進階風險分析技術偵測詐欺行為，您可以透過 reCAPTCHA 保護網站或行動應用程式免受垃圾內容和濫用行為侵擾，並偵測其他類型的詐欺活動，例如憑證填充、帳戶盜用 (ATO) 和自動建立帳戶。
reCAPTCHA 提供更精細的分數、高風險事件的原因代碼、行動應用程式 SDK、密碼外洩偵測、多重驗證 (MFA)，以及調整網站專屬模型的功能，可保護企業業務。
```

<br/>
<br/><img src="/assets/image/LearnNote/2025_09_20/000.png" alt="" width="70%" height="70%" />
<br/><br/>





<br/><br/>
<h1>第二部分：啟用配置 & 管理金鑰</h1>

<h2>Step 1： 目標</h2>
<br/>
<br/><img src="/assets/image/LearnNote/2025_09_20/000.png" alt="" width="70%" height="70%" />
<br/><br/>




<br/><br/>
<h1>第三部分：範例專案架構</h1>

<h2>Step 1： 目標</h2>
<br/>
<br/><img src="/assets/image/LearnNote/2025_09_20/000.png" alt="" width="70%" height="70%" />
<br/><br/>


<br/><br/>
<h1>第四部分：reCAPTCHA DEMO - 隱形 reCAPTCHA 標記</h1>

<h2>Step 1： 目標</h2>
<br/>
<br/><img src="/assets/image/LearnNote/2025_09_20/000.png" alt="" width="70%" height="70%" />
<br/><br/>


<br/><br/>
<h1>第五部分：reCAPTCHA DEMO -「我不是機器人」核取方塊</h1>

<h2>Step 1： 目標</h2>
<br/>
<br/><img src="/assets/image/LearnNote/2025_09_20/000.png" alt="" width="70%" height="70%" />
<br/><br/>


<br/><br/>
<h1>第六部分：reCAPTCHA DEMO - 以分數為依據 (v3)</h1>

<h2>Step 1： 目標</h2>
<br/>
<br/><img src="/assets/image/LearnNote/2025_09_20/000.png" alt="" width="70%" height="70%" />
<br/><br/>





<a href="https://www.google.com/recaptcha/">管理 reCAPTCHA</a>





| reCAPTCHA 類型                 | 使用者互動                   | 前端實作難度                         | UX 體驗           | 防機器人機制說明                                                                                                 | 適合應用場景              |
| ---------------------------- | ----------------------- | ------------------------------ | --------------- | -------------------------------------------------------------------------------------------------------- | ------------------- |
| **v2 Checkbox**              | 需點「我不是機器人」核取方塊，有時出現圖片驗證 | **低**：僅需簡單 HTML 標籤             | 介入性中：有視覺挑戰，減少衝擊 | 使用行為分析 + 圖像驗證挑戰拦截機器人 ([Google for Developers][1], [DataDome][2], [Spider AF][3])                         | 表單、註冊、留言板的快速實作防護    |
| **Invisible reCAPTCHA (v2)** | 無需點擊核取框，隱形觸發驗證          | **中**：需 JavaScript 整合 callback | 較無介入：對使用者更友善    | 背景行為風險評估，自動根據風險可能再顯示驗證畫面 ([Google for Developers][1], [DataDome][4])                                     | 需要平滑驗證流程的平台（如登入、提交） |
| **v3（分數評估）**                 | 完全無使用者操作                | **高**：需後端判斷 score 與動作          | 零中斷用戶體驗         | 背景分析使用者行為，回傳 0–1 分數，自訂門檻採取額外動作 ([Google for Developers][1], [GeeTest][5], [DataDome][6], [Spider AF][3]) | 大型網站、高流量平台，須彈性策略防護  |

[1]: https://developers.google.com/recaptcha/docs/versions?utm_source=chatgpt.com "Choosing the type of reCAPTCHA - Google for Developers"
[2]: https://datadome.co/guides/captcha/how-does-recaptcha-work/?utm_source=chatgpt.com "How does reCAPTCHA work? How it is triggered & bypassed"
[3]: https://spideraf.com/articles/google-recaptcha-v2-vs-v3?utm_source=chatgpt.com "Google reCAPTCHA v2 vs v3 – Which One is Right for Your Website?"
[4]: https://datadome.co/guides/captcha/invisible-recaptcha/?utm_source=chatgpt.com "What is invisible reCAPTCHA? How to choose your CAPTCHA."
[5]: https://blog.geetest.com/en/article/recaptcha-v2-vs-v3?utm_source=chatgpt.com "Google reCAPTCHA v2 vs v3: Key Differences and Selection Guide"
[6]: https://datadome.co/guides/captcha/recaptchav2-recaptchav3-efficient-bot-protection/?utm_source=chatgpt.com "ReCAPTCHA v2 vs. v3: Efficient bot protection? [2024 Update]"

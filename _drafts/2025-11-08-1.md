---
layout: default_post
title: "0011. Docker Container(容器)內的應用程式結束後 Container 也停止的原因"
excerpt: "Docker"
tags: 
  - "Docker"
  - "Docker-Compose"
  - "Container"
  - "Ubuntu"
  - "Linux"    
---

<div class="summary">
<br/>應用所需：已安裝 Docker
<br/>解決問題：說明為何當容器內的應用程式關閉，外部容器也會跟著停止
<br/>範例檔案：<a href="https://github.com/gotoa1234/MyBlogExample/tree/main/StaticWeb">本篇範例代碼</a>
<br/>基本介紹：本篇分為 4 部分。
<br/>第一部分：問題描述
<br/>第二部分：Linux 特性與容器應用的關係
<br/>第三部分：Demo 驗證
<br/>第四部分：標題是正確 - 符合單一職責與最佳實踐
</div>

<div class="title">
    <br/><hr class="titleinner">
	<span></span>
	<hr class="titleinner"><br/>
</div>

<br/><br/>
<h1>第一部分：問題描述</h1>

<h2>Step 1：運行範例代碼</h2>
下載<a href="https://github.com/gotoa1234/MyBlogExample/tree/main/StaticWeb">範例檔案</a>來說明，執行以下在 Ubuntu 主機上

``` Shell
docker-compose up -d
```

<br/> <img src="/assets/image/ContinuousDeployment/docker/2025_11_08/001.png" alt="" width="70%" height="70%" />
<br/><br/>

<h2>Step 2：檢查容器內的應用程式</h2>
我們選擇一個 Container 檢查

``` Shell
docker exec staticweb_ipinfoexample_1 ps aux
```

<br/>可以觀察到 PID = 1 的應用程式是我們 DockerFile 的啟動 

``` Shell
CMD ["nginx", "-g", "daemon off;"]
```

<br/> <img src="/assets/image/ContinuousDeployment/docker/2025_11_08/003.png" alt="" width="70%" height="70%" />
<br/><br/>


<h2>Step 3：問題描述 - 嘗試刪除容器內的應用程式</h2>
執行以下刪除容器內的 Process 指令

``` Shell
docker exec staticweb_ipinfoexample_1 kill -15 1
```

<br/>指令拆解說明：

{:class="table table-bordered"}
| 指令拆解           | 說明       |
| --- | --- |
| docker exec | 在該容器裡執行一個命令 |
| kill | 傳送訊號給某個進程。 |
| -15 | 表示訊號 SIGTERM (訊號中止, signal terminate) |
| -1 | PID 編號 1 ，在容器內該 Process 的 ID 編號為 1 |

<br/>執行後可以觀察到容器也跟著停止，為何呢? 
<br/> <img src="/assets/image/ContinuousDeployment/docker/2025_11_08/002.png" alt="" width="70%" height="70%" />
<br/><br/>







<br/><br/>
<h1>第二部分：Linux 特性與容器應用的關係</h1>

<h2>Step 1：多環境管理機器架構 & 本節目標</h2>
<br/> <img src="/assets/image/ContinuousDeployment/docker/2025_11_08/000.png" alt="" width="70%" height="70%" />
<br/><br/>



<br/><br/>
<h1>第三部分：Demo 驗證</h1>
<br/>


<h2>Step 1：Portainer CE 限制 & 本節目標</h2>

{:class="table table-bordered"}
| 功能           | 是否可用於 Portainer CE       |
| -------------- | ------------------------ |
| 建立多個使用者帳號      | ✅                        |


<br/> <img src="/assets/image/ContinuousDeployment/docker/2025_11_08/000.png" alt="" width="70%" height="70%" />
<br/><br/>





<br/><br/>
<h1>第四部分：標題是正確 - 符合單一職責與最佳實踐</h1>

<h2>Step 1：快速部署預設的容器 & 本節目標</h2>

<br/> <img src="/assets/image/ContinuousDeployment/docker/2025_11_08/000.png" alt="" width="70%" height="70%" />
<br/><br/>

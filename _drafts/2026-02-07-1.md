---
layout: default_post
title:  "0025. 【NAS 進階】Synology WebStation 架設個人網站 - 分享 NAT 與 TailScale 公網配置方案"
excerpt: "資訊筆記"
tags: 
- "Linux"
- "Ubuntu"
- "Docker"
- "Docker-Compose"
- "Container"
- "Portaniner"
- "Synology"
- "TailScale"
- "NAS"
---

<div class="summary">
<br/>應用所需：1. Linux 主機(本篇 Linux Ubuntu 22.04 作業系統)
<br/>&emsp;&emsp;&emsp;&emsp;&emsp;2. 已安裝 Docker-Compose (Docker ≥ 20.x（rootful）、docker‑compose ≥ v2)
<br/>解決問題：1. 如何在 NAS 上安裝 WebStation 架設個人網站
<br/>&emsp;&emsp;&emsp;&emsp;&emsp;2. 如何透過 NAT 或 TailScale Funnel 於 WWW 開放訪問(公網訪問)  
<br/>相關參考：1. <a href="https://gotoa1234.github.io/2025/12/13/1.html">0023. 【NAS 進階】Synology 打造免費私人知識庫：Docker 安裝 + TailScale Funnel 對外開放完整教學</a>
<br/>&emsp;&emsp;&emsp;&emsp;&emsp;2. <a href="https://gotoa1234.github.io/2025/12/27/1.html">0024. 【NAS 進階】Synology 免費私人知識庫 BookStack 進階設定：Gmail 郵件通知與 Webhook 自動化整合測試教學</a>
<br/>基本介紹：本篇分為 4 大部分。
<br/>第一部分：需求說明 & 目標
<br/>第二部分：安裝 Synology NAS Webstation
<br/>第三部分：TailScale Funnel-解決方案
<br/>第四部分：路由器 NAT 配置-解決方案 
<br/>第五部分：補充說明

</div>

<div class="title">
    <br/><hr class="titleinner">
	<span></span>
	<hr class="titleinner"><br/>
</div>

<br/><br/>
<h1>第一部分：需求說明 & 目標</h1>

<h2>Step 1：需求 - 想發布靜態網頁</h2>
目前有一個靜態網頁 <a href="https://gotoa1234.github.io/example/Migu/Busan.html">Busan 靜態網頁</a>，希望利用 NAS Server 分享到網際網路，提供訪問
<br/> <img src="/assets/image/Infomation/2026_02_07/000.png" alt="" width="100%" height="100%" />
<br/><br/>

<h2>Step 2：目標 - 架構</h2>
以下為架構，目標是透過以下 2 個方案實現我們的目的

{:class="table table-bordered"}
|  1. WebStation + TailScale | NAS 上安裝 WebStation 透過 TailScale Funnel 提供訪問   |
|  2. WebStation + NAT(Router)    |  NAS 上安裝 WebStation 透過 **家裡路由器** 設定 NAT ，將 NAS 與 Router 做轉發設定   |

<br/>方案架構圖如下：
<br/> <img src="/assets/image/Infomation/2026_02_07/000_2.png" alt="" width="100%" height="100%" />
<br/><br/>





<br/><br/>
<h1>第二部分：安裝 Synology NAS Webstation</h1>

<h2>Step 1：進入 NAS - 安裝 WebStation</h2>
進入自己的 NAS Server -> 套件中心 -> 所有安裝 -> 搜尋 **WebStation** -> 安裝
<br/>最後開啟
<br/> <img src="/assets/image/Infomation/2026_02_07/001.png" alt="" width="100%" height="100%" />
<br/><br/>

<h2>Step 2：WebStation 狀態 - 檢查</h2>
確認以下 2 項狀態為正常即可

{:class="table table-bordered"}
| 預設伺服器狀態 |
| 網頁服務入口狀態 |

<br/> <img src="/assets/image/Infomation/2026_02_07/002.png" alt="" width="100%" height="100%" />
<br/><br/>


<h2>Step 3：WebStation 網頁服務入口 - 確認 Port</h2>
假設自己的 Port 未異動，會自動啟用 Http (80 port) 與 Https (443 Port)
<br/> <img src="/assets/image/Infomation/2026_02_07/003.png" alt="" width="100%" height="100%" />
<br/><br/>

<h2>Step 4：設定 Web 資料夾</h2>
進入自己的 NAS Root 檔案目錄，會發現 WebStation 生成 Web 資料夾
<br/> <img src="/assets/image/Infomation/2026_02_07/004.png" alt="" width="100%" height="100%" />
<br/>
<br/>裡面內容預設為空
<br/> <img src="/assets/image/Infomation/2026_02_07/005.png" alt="" width="100%" height="100%" />
<br/><br/>


<h2>Step 5：將靜態網頁貼上</h2>
這邊為了快速展示對外設定，因此用了靜態網站，實務上 SSR 等架構都是可以支持的
<br/>將 <a href="https://gotoa1234.github.io/example/Migu/Busan.html">Busan 靜態網頁</a>檔案貼上至 **Web 目錄** 下
<br/> <img src="/assets/image/Infomation/2026_02_07/006.png" alt="" width="100%" height="100%" />
<br/><br/>

<h2>Step 6：開啟網站</h2>
回到 NAS 套件中心的 WebStation ，可以如下圖的地方展開連結
<br/> <img src="/assets/image/Infomation/2026_02_07/007.png" alt="" width="100%" height="100%" />
<br/><br/>

<h2>Step 7：開啟網站 - 設定成功</h2>
可以看到在區域網路下 **http://192.168.1.200** 可以看到靜態網頁，表示 WebStation 服務已經建立完成
<br/> <img src="/assets/image/Infomation/2026_02_07/008.png" alt="" width="100%" height="100%" />
<br/><br/>


<h2>Step 8：需克服的問題</h2>
但是只能在區域網路內訪問網站，實際上在外部網路是不能通的，所以後續還有 2 個解決方案說明如何開通
<br/> <img src="/assets/image/Infomation/2026_02_07/009.png" alt="" width="100%" height="100%" />
<br/><br/>





<br/><br/>
<h1>第三部分：TailScale Funnel-解決方案</h1>

<h2>Step 1：準備工作 - 開通 TailScale Funnel</h2>
如何開通 Synology NAS 上的 TailScale Funnel 可參考之前寫的<a href="https://gotoa1234.github.io/2025/12/13/1.html">這篇</a>
<br/> <img src="/assets/image/Infomation/2026_02_07/000.png" alt="" width="100%" height="100%" />
<br/><br/>


<h2>Step 2：進入 NAS Server - 指令模式</h2>
透過遠端工具訪問 NAS Server 的 SSH 443 

``` bash
sudo tailscale funnel status
```

<br/>確認是否有通
<br/> <img src="/assets/image/Infomation/2026_02_07/010.png" alt="" width="100%" height="100%" />
<br/><br/>


<h2>Step 3：進入 NAS Server - 配置 WebStation</h2>
輸入以下指令，即可完成配置 TailScale Funnel

``` bash
sudo tailscale serve --bg --set-path /web http://127.0.0.1:80
```

<br/>目的是我們配置的 **xxxx.tailed716c.ts.net** 已經被另個容器使用
<br/>因此將 WebStation 的預設域名改為 **xxxx.tailed716c.ts.net/web**
<br/> <img src="/assets/image/Infomation/2026_02_07/011.png" alt="" width="100%" height="100%" />
<br/><br/>



<h2>Step 4：配置完成 - 可對外訪問</h2>
xxxx 是自己 NAS 的設定，但設定完成後，輸入以下訪問網址 (有/web) 就可以看到 Webstation 已可對外訪問

``` markdown
https://**xxxx.tailed716c.ts.net/web**
```

<br/> <img src="/assets/image/Infomation/2026_02_07/012.png" alt="" width="100%" height="100%" />
<br/><br/>




<br/><br/>
<h1>第四部分：路由器 NAT 配置-解決方案 </h1>

<h2>Step 1：發送郵件相關操作頁面 - 新增使用者</h2>

<br/> <img src="/assets/image/Infomation/2026_02_07/000.png" alt="" width="100%" height="100%" />
<br/><br/>


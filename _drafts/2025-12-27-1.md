---
layout: default_post
title:  "0024. 【NAS 進階】Synology 免費私人知識庫 BookStack 進階設定：Gmail 郵件通知與 Webhook 自動化整合教學"
excerpt: "資訊筆記"
tags: 
- "Linux"
- "Ubuntu"
- "Docker"
- "Docker-Compose"
- "Container"
- "BookStack"
- "MariaDB"
- "LinuxServer.io"
- "Portaniner"
- "Webhook.site"
---

<div class="summary">
<br/>應用所需：1. Linux 主機(本篇 Linux Ubuntu 22.04 作業系統)
<br/>&emsp;&emsp;&emsp;&emsp;&emsp;2. 已安裝 Docker-Compose (Docker ≥ 20.x（rootful）、docker‑compose ≥ v2)
<br/>解決問題：1. 如何結合 Google Mail Server 從 NAS 上的 BookStack 發送郵件到合法的外部 Mail 信箱
<br/>&emsp;&emsp;&emsp;&emsp;&emsp;2. 啟用 BookStack WebHook & 便於未來自動化應用
<br/>相關參考：<a href="https://gotoa1234.github.io/2025/12/13/1.html">0023. 【NAS 進階】Synology 打造免費私人知識庫：Docker 安裝 + Tailscale Funnel 對外開放完整教學</a>
<br/>基本介紹：本篇分為 3 大部分。
<br/>第一部分：設定 Gmail SMTP 發送郵件
<br/>第二部分：啟用 Webhook 自動化功能
<br/>第三部分：總結與建議

</div>

<div class="title">
    <br/><hr class="titleinner">
	<span></span>
	<hr class="titleinner"><br/>
</div>

<br/><br/>
<h1>第一部分：設定 Gmail SMTP 發送郵件</h1>

<h2>Step 1：啟用 Mail 的好處 - 新增使用者</h2>
登入 BookStack 後 -> 設定 -> 使用者 -> 新增使用者
<br/> <img src="/assets/image/Infomation/2025_12_27/000.png" alt="" width="50%" height="50%" />
<br/><br/>

<h2>Step 2：啟用 Mail 的好處 - 放止密碼外洩</h2>
註冊使用者時，可以選擇將密碼直接發送到註冊用戶的個人 Email
<br/> <img src="/assets/image/Infomation/2025_12_27/000_1.png" alt="" width="50%" height="50%" />
<br/>
<br/>這時如果有啟用 BookStack 發送 Mail 功能，就可以避免透過其他方式傳遞的時候被第三方竊取(EX: Line、Whatsapp 等)
<br/>補充：如果沒有在 docker-compose.yml 配置啟用，那麼就必定會出現圖中的錯誤，無法使用 Email 發信
<br/> <img src="/assets/image/Infomation/2025_12_27/000_2.png" alt="" width="50%" height="50%" />
<br/><br/>

<h2>Step 3：啟用 Email 送信 - Google 啟用應用程式密碼</h2>
要先啟用 Google mail 的**啟用應用程式密碼**配置，才能將 Google 的 SMTP 當作發送方
<br/>也可參考此篇：<a href="https://gotoa1234.github.io/2020/09/16/1.html">0026. log4net 發送Email的方法，使用Gmail為範例</a>
<br/> <img src="/assets/image/LearnNote/2025_04_19/001.png" alt="" width="50%" height="50%" />
<br/><br/>


<h2>Step 4：啟用應用程式密碼 - 建立</h2>
輸入一個名稱，自己知道用途，後續不使用可以進行刪除
<br/> <img src="/assets/image/LearnNote/2025_04_19/002.png" alt="" width="50%" height="50%" />
<br/><br/>

<h2>Step 5：啟用應用程式密碼 - 產生密碼</h2>
系統會為您的 Google 帳戶產生一組密碼，此密碼可以用於程式碼的發送 Email 郵件
<br/> <img src="/assets/image/LearnNote/2025_04_19/003.png" alt="" width="50%" height="50%" />
<br/><br/>

<h2>Step 6：設定 BookStack docker-compose</h2>
透過 SSH 登入 NAS Server ，並且先停止 BookStack 的 Container

``` shell
docker-compose down -v
```

<br/>
<br/>然後將 docker-compose.yml 添加以下資訊，其中 **{}** 都是要替換的地方 

``` yaml
 - MAIL_DRIVER=smtp
 - MAIL_HOST=smtp.gmail.com
 - MAIL_PORT=587
 - MAIL_FROM_ADDRESS={您的 Google Email帳號}@gmail.com
 - MAIL_ENCRYPTION=tls
 - MAIL_USERNAME={您的 Google Email帳號}@gmail.com
 - MAIL_PASSWORD={應用程式密碼16碼}
```

<br/>如圖，應會如下：
<br/> <img src="/assets/image/Infomation/2025_12_27/000_3.png" alt="" width="50%" height="50%" />
<br/><br/>


<h2>Step 7：啟動 BookStack - 發送測試信 - 設定完成</h2>
然後再輸入以下指令啟動 BookStack

``` shell
docker-compose up -d
```

<br/>登入 BookStack -> 設定 -> 維護 -> 點擊 **執行測試電子郵件** 的按鈕
<br/>我們可以從信箱收到 BookStack 發送的信件
<br/>備註：這邊會記送到登入者的信箱，做為測試信，EX: 我是用 Cap8825@gmail.com 登入 BookStack 執行測試信，就會從此 Gmail 收到測試信
<br/> <img src="/assets/image/Infomation/2025_12_27/002.png" alt="" width="50%" height="50%" />
<br/><br/>



<br/><br/>
<h1>第二部分：啟用 Webhook 自動化功能</h1>

<h2>Step 1：設定全域權限與內容權限範例</h2>
<br/> <img src="/assets/image/Infomation/2025_12_27/000.png" alt="" width="50%" height="50%" />
<br/><br/>



<br/><br/>
<h1>第三部分：總結與建議</h1>

<h2>Step 1：使用技巧與維護</h2>
<br/> <img src="/assets/image/Infomation/2025_12_27/000.png" alt="" width="50%" height="50%" />
<br/><br/>
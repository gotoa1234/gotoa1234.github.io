---
layout: default_post
title:  "0025. 【NAS 進階】Synology WebStation 架設個人網站 - 分享 NAT 與 TailScale 公網配置方案"
excerpt: "資訊筆記"
tags: 
- "Linux"
- "Ubuntu"
- "Docker"
- "Docker-Compose"
- "Container"
- "Portaniner"
- "Synology"
- "TailScale"
- "NAS"
---

<div class="summary">
<br/>應用所需：1. Linux 主機(本篇 Linux Ubuntu 22.04 作業系統)
<br/>&emsp;&emsp;&emsp;&emsp;&emsp;2. 已安裝 Docker-Compose (Docker ≥ 20.x（rootful）、docker‑compose ≥ v2)
<br/>解決問題：1. 如何在 NAS 上安裝 WebStation 架設個人網站
<br/>&emsp;&emsp;&emsp;&emsp;&emsp;2. 如何透過 NAT 或 TailScale Funnel 於 WWW 開放訪問(公網訪問)  
<br/>相關參考：1. <a href="https://gotoa1234.github.io/2025/12/13/1.html">0023. 【NAS 進階】Synology 打造免費私人知識庫：Docker 安裝 + TailScale Funnel 對外開放完整教學</a>
<br/>&emsp;&emsp;&emsp;&emsp;&emsp;2. <a href="https://gotoa1234.github.io/2025/12/27/1.html">0024. 【NAS 進階】Synology 免費私人知識庫 BookStack 進階設定：Gmail 郵件通知與 Webhook 自動化整合測試教學</a>
<br/>基本介紹：本篇分為 5 大部分。
<br/>第一部分：需求說明 & 目標
<br/>第二部分：安裝 Synology NAS Webstation
<br/>第三部分：TailScale Funnel-解決方案
<br/>第四部分：路由器 NAT 配置-解決方案 
<br/>第五部分：補充說明

</div>

<div class="title">
    <br/><hr class="titleinner">
	<span></span>
	<hr class="titleinner"><br/>
</div>

<br/><br/>
<h1>第一部分：需求說明 & 目標</h1>

<h2>Step 1：需求 - 想發布靜態網頁</h2>
目前有一個靜態網頁 <a href="https://gotoa1234.github.io/example/Migu/Busan.html">Busan 靜態網頁</a>，希望利用 NAS Server 分享到網際網路，提供訪問
<br/> <img src="/assets/image/Infomation/2026_02_07/000.png" alt="" width="50%" height="50%" />
<br/><br/>

<h2>Step 2：目標 - 架構</h2>
以下為架構，目標是透過以下 2 個方案實現我們的目的

{:class="table table-bordered"}
| 方案A | 1. WebStation + TailScale | NAS 上安裝 WebStation 透過 TailScale Funnel 提供訪問   |
| 方案B | 2. WebStation + NAT(Router)    |  NAS 上安裝 WebStation 透過 **家裡路由器** 設定 NAT ，將 NAS 與 Router 做轉發設定   |

<br/>方案架構圖如下：
<br/> <img src="/assets/image/Infomation/2026_02_07/000_2.png" alt="" width="50%" height="50%" />
<br/><br/>





<br/><br/>
<h1>第二部分：安裝 Synology NAS Webstation</h1>

<h2>Step 1：進入 NAS - 安裝 WebStation</h2>
進入自己的 NAS Server -> 套件中心 -> 所有安裝 -> 搜尋 **WebStation** -> 安裝
<br/>最後開啟
<br/> <img src="/assets/image/Infomation/2026_02_07/001.png" alt="" width="80%" height="80%" />
<br/><br/>

<h2>Step 2：WebStation 狀態 - 檢查</h2>
確認以下 2 項狀態為正常即可

{:class="table table-bordered"}
| 預設伺服器狀態 | 正常 |
| 網頁服務入口狀態 | 正常 |

<br/> <img src="/assets/image/Infomation/2026_02_07/002.png" alt="" width="100%" height="100%" />
<br/><br/>


<h2>Step 3：WebStation 網頁服務入口 - 確認 Port</h2>
假設自己的 Port 未異動，會自動啟用 Http (80 port) 與 Https (443 Port)
<br/> <img src="/assets/image/Infomation/2026_02_07/003.png" alt="" width="100%" height="100%" />
<br/><br/>

<h2>Step 4：設定 Web 資料夾</h2>
進入自己的 NAS Root 檔案目錄，會發現 WebStation 生成 Web 資料夾
<br/> <img src="/assets/image/Infomation/2026_02_07/004.png" alt="" width="30%" height="30%" />
<br/>
<br/>裡面內容預設為空
<br/> <img src="/assets/image/Infomation/2026_02_07/005.png" alt="" width="30%" height="30%" />
<br/><br/>


<h2>Step 5：將靜態網頁貼上</h2>
這邊為了快速展示對外設定，因此用了靜態網站，實務上 SSR 等架構都是可以支持的
<br/>將 <a href="https://gotoa1234.github.io/example/Migu/Busan.html">Busan 靜態網頁</a>檔案貼上至 **Web 目錄** 下
<br/> <img src="/assets/image/Infomation/2026_02_07/006.png" alt="" width="30%" height="30%" />
<br/><br/>

<h2>Step 6：開啟網站</h2>
回到 NAS 套件中心的 WebStation ，可以如下圖的地方展開連結
<br/> <img src="/assets/image/Infomation/2026_02_07/007.png" alt="" width="80%" height="80%" />
<br/><br/>

<h2>Step 7：開啟網站 - 設定成功</h2>
可以看到在區域網路下 **http://192.168.1.200** 可以看到靜態網頁，表示 WebStation 服務已經建立完成
<br/> <img src="/assets/image/Infomation/2026_02_07/008.png" alt="" width="50%" height="50%" />
<br/><br/>


<h2>Step 8：需克服的問題</h2>
但是只能在區域網路內訪問網站，實際上在外部網路是不能通的，所以後續還有 2 個解決方案說明如何開通
<br/> <img src="/assets/image/Infomation/2026_02_07/009.png" alt="" width="30%" height="30%" />
<br/><br/>





<br/><br/>
<h1>第三部分：TailScale Funnel-解決方案</h1>

<h2>Step 1：準備工作 - 開通 TailScale Funnel</h2>
如何開通 Synology NAS 上的 TailScale Funnel 可參考之前寫的<a href="https://gotoa1234.github.io/2025/12/13/1.html">這篇</a>
<br/> <img src="/assets/image/Infomation/2026_02_07/000.png" alt="" width="50%" height="50%" />
<br/><br/>


<h2>Step 2：進入 NAS Server - 指令模式</h2>
透過遠端工具訪問 NAS Server 的 SSH 443 

``` bash
sudo tailscale funnel status
```

<br/>確認是否有通
<br/> <img src="/assets/image/Infomation/2026_02_07/010.png" alt="" width="50%" height="50%" />
<br/><br/>


<h2>Step 3：進入 NAS Server - 配置 WebStation</h2>
輸入以下指令，即可完成配置 TailScale Funnel

``` bash
sudo tailscale serve --bg --set-path /web http://127.0.0.1:80
```

<br/>目的是我們配置的 **xxxx.tailed716c.ts.net** 已經被另個容器使用
<br/>因此將 WebStation 的預設域名改為 **xxxx.tailed716c.ts.net/web**
<br/> <img src="/assets/image/Infomation/2026_02_07/011.png" alt="" width="50%" height="50%" />
<br/><br/>



<h2>Step 4：配置完成 - 可對外訪問</h2>
xxxx 是自己 NAS 的設定，但設定完成後，輸入以下訪問網址 (有/web) 就可以看到 Webstation 已可對外訪問

``` markdown
https://**xxxx.tailed716c.ts.net/web**
```

<br/> <img src="/assets/image/Infomation/2026_02_07/012.png" alt="" width="50%" height="50%" />
<br/><br/>




<br/><br/>
<h1>第四部分：路由器 NAT 配置-解決方案 </h1>

<h2>Step 1：登入路由器</h2>
租用電信商網路通常會提供路由器，可以在連到網路的設備訪問以下網址，進行登入
<br/>※帳號密碼需問電信商

``` Markdown
https://192.168.1.1
http://192.168.1.1
```

<br/> <img src="/assets/image/Infomation/2026_02_07/013.png" alt="" width="30%" height="30%" />
<br/><br/>

<h2>Step 2：訪問 NAT 配置</h2>
每個路由器設備的網頁畫面排版不盡相同，需找出 **NAT** ，通常在 **網路設定**、**網路** 的配置
<br/> <img src="/assets/image/Infomation/2026_02_07/014.png" alt="" width="50%" height="50%" />
<br/><br/>


<h2>Step 3：新增 NAT 規則</h2>
依序選擇 => Port Forwarding -> + 新增規則
<br/>目的是讓 NAS 的 WebStation 使用的 80 Port / 443 Port 可以讓路由器轉發
<br/> <img src="/assets/image/Infomation/2026_02_07/015.png" alt="" width="80%" height="80%" />
<br/><br/>

<h2>Step 4：新增 NAT 規則 - Http 設定</h2>
將自己 NAS 的 Http 訪問配置到 NAT 設定中，這邊我的 NAS 內部IP : **192.168.1.200**，依序填入 Http 配置，最後進行保存

{:class="table table-bordered"}
| 項目 | 填入內容 |
| --- | --- |
| 服務明稱 | 自行填寫易於辨識的名稱 |
| WAN Interface |  Default (預設) |
| Start Port | 80 |
| End Port | 80 |
| Translation Start Port | 80 |
| Translation End Port | 80 |
| Portocol | TCP |

<br/> <img src="/assets/image/Infomation/2026_02_07/016.png" alt="" width="50%" height="50%" />
<br/><br/>


<h2>Step 5：新增 NAT 規則 - Https 設定</h2>
再次新增規則，依序填入 Https 配置，最後進行保存

{:class="table table-bordered"}
| 項目 | 填入內容 |
| --- | --- |
| 服務明稱 | 自行填寫易於辨識的名稱 |
| WAN Interface |  Default (預設) |
| Start Port | 443 |
| End Port | 443 |
| Translation Start Port | 443 |
| Translation End Port | 443 |
| Portocol | TCP |

<br/> <img src="/assets/image/Infomation/2026_02_07/016_2.png" alt="" width="50%" height="50%" />
<br/><br/>


<h2>Step 6：新增 NAT 規則完成 - 檢查狀態</h2>
回到 NAT 狀態頁，我們新增的 HTTP / HTTPS NAT 規則會出現，通常有狀態指示，這邊的介面是亮燈號，表示運行正常(跟 NAS 有正常轉發)
<br/> <img src="/assets/image/Infomation/2026_02_07/017.png" alt="" width="100%" height="100%" />
<br/><br/>


<h2>Step 7：DEMO - 找出自己 IP</h2>
這邊 DEMO 使用的是浮動IP，因此還需找出自己的 IP ，可以 Google 搜尋 **What Is my IP**，得到如圖的浮動IP，這就是對外訪問的IP
<br/>※如果自己架設個人網站，可以自行申請 Static IP 
<br/>

``` Markdown
111.249.252.100
```

<br/> <img src="/assets/image/Infomation/2026_02_07/018.png" alt="" width="50%" height="50%" />
<br/><br/>

<h2>Step 8：DEMO - 成功</h2>
切換網路(用自己的手機、其他地方的網路驗證)，在瀏覽器網址列輸入當前的 IP ，可以看到路由器的 NAT 會幫我們轉發到 NAS 的 WebSation

``` Markdown
https://111.249.252.100
```

<br/>下圖是 WebStation 的靜態網站內容頁面
<br/> <img src="/assets/image/Infomation/2026_02_07/019.png" alt="" width="50%" height="50%" />
<br/><br/>




<br/><br/>
<h1>第五部分：補充說明</h1>

<h2>Step 1：路由器 - 解決無法登入問題</h2>
這是現代路由器安全機制，如果無法登入 192.168.1.1 路由器時，請用有線網路進行登入，並非帳密錯誤

{:class="table table-bordered"}
| 有線 LAN ： | 可以登入 192.168.1.1 |
| 無線 Wi-Fi： | 禁止存取管理頁 |

<br/>不同品牌叫法不同，但大致像這些：

```
Disable Wireless Management

Allow administration from LAN only

Web UI Access Control

Local Management > LAN only

Enable/Disable WLAN access to router
```

<br/><br/>



